webpackJsonp([1],{110:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var i=n(7),r=n.n(i),o=n(5),s=(n(117),n(77)),a=(n.n(s),n(15));t.default={name:"scene-running",data:function(){return{renderDom:void 0,runner:s.Runner.create(),viewPort:{min:{x:0,y:0},max:{x:800,y:600}}}},computed:r()({},n.i(a.a)(["runningRender","engine"])),watch:{viewPort:{handler:function(){s.Render.lookAt(this.runningRender,this.viewPort)},deep:!0}},methods:r()({},n.i(a.c)({initSceneRunning:o.INIT_SCENE_RUNNING}),{sceneStart:function(){s.Runner.start(this.runner,this.engine)},scenePause:function(){s.Runner.stop(this.runner)},sceneReset:function(){s.Common._nextId=0,s.Common._seed=0,s.Render.stop(this.runningRender),s.Runner.stop(this.runner),this.runningRender.canvas.parentElement.removeChild(this.runningRender.canvas),this.initSceneRunning(),this.renderScene()},renderScene:function(){this.renderDom.appendChild(this.runningRender.canvas),s.Render.lookAt(this.runningRender,this.viewPort),this.runningRender.canvas.width=this.renderDom.clientWidth,this.runningRender.canvas.height=this.renderDom.clientHeight,s.Render.run(this.runningRender)},handleAdd:function(){}}),mounted:function(){this.renderDom=e("#scene-running-render")[0],this.initSceneRunning(),this.renderScene()}}}.call(t,n(52))},112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var i=n(120),r=n.n(i),o=n(7),s=n.n(o),a=n(5),c=n(15),l=n(206),u=n.n(l),d=n(204),f=n.n(d),h=n(203),p=n.n(h);t.default={name:"vml-workbench",data:function(){return{storage:window.localStorage,sceneEditorSpan:12,sceneRunningSpan:12}},computed:s()({},n.i(c.a)(["fileName","sceneData"]),{storageFileNames:function(){for(var e=[],t=0;t<this.storage.length;t++)e.push(this.storage.key(t));return e}}),watch:{storageFileNames:function(){}},methods:s()({},n.i(c.b)({updateSceneRunning:a.UPDATE_SCENE_RUNNING}),n.i(c.c)({initSceneEditor:a.INIT_SCENE_EDITOR,initSceneRunning:a.INIT_SCENE_RUNNING}),{handleSelect:function(e){switch(e){case"createScene":this.updateSceneRunning({fileName:e,sceneData:this.storage.getItem(e)});break;case"showScene":console.log(r()(this.sceneData,null,2));break;case"importScene":break;case"saveScene":this.storage.setItem(this.fileName,r()(this.sceneData,null,2));break;default:console.error("unknown menu key:"+e)}},importScene:function(){var t=e("#import-scene-input")[0].files[0],n=new FileReader;n.readAsText(t);var i=this;n.onload=function(){console.log(t.name),console.log(this.result),i.updateSceneRunning({fileName:t.name,sceneData:JSON.parse(this.result)})}},sceneEdit:function(){this.sceneEditorSpan=24,this.sceneRunningSpan=0},sceneHalf:function(){this.sceneEditorSpan=12,this.sceneRunningSpan=12},sceneRunning:function(){this.sceneEditorSpan=0,this.sceneRunningSpan=24},handleAbout:function(){this.$confirm("这是一个模拟物理场景的实验室！","关于",{center:!0,showConfirmButton:!1,showCancelButton:!1,showClose:!0,type:"info "})}}),beforeMount:function(){this.initSceneEditor(),this.initSceneRunning()},components:{SceneEditor:u.a,SceneRunning:f.a,CircleMenu:p.a}}}.call(t,n(52))},113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var i=n(7),r=n.n(i),o=n(5),s=n(15),a=(n(55),n(207)),c=n.n(a),l=n(208),u=n.n(l);t.default={name:"scene-editor",data:function(){return{}},computed:r()({},n.i(s.a)(["fileName","editorGraph","sceneData"])),methods:r()({},n.i(s.c)({initSceneEditor:o.INIT_SCENE_EDITOR}),{deleteBody:function(){console.log("delete")},undo:function(){console.log("undo")},redo:function(){console.log("redo")}}),mounted:function(){this.editorGraph.init(e("#graph-container")[0]),this.editorGraph.view.refresh(),new mxOutline(this.editorGraph,e("#outline")[0])},components:{ScenePalette:c.a,SceneProperty:u.a}}}.call(t,n(52))},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=(n(15),n(209)),o=n.n(r);t.default={name:"scene-palette",data:function(){return{types:i}},components:{paletteItem:o.a}}},115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=n.n(i),o=(n(5),n(30),n(222)),s=n.n(o),a=n(15),c=s.a.options;t.default={name:"scene-property",data:function(){return{label:"Body",isStatic:!1,mass:1,friction:.1,restitution:0}},computed:r()({},n.i(a.a)({selectionCell:"editorSelectionCell",graph:"editorGraph"})),watch:{selectionCell:function(e,t){if(this.label=c.label,this.isStatic=c.isStatic,this.mass=c.mass,this.friction=c.friction,this.restitution=c.restitution,e){var n=e.value;this.label=n.label||this.label,this.isStatic=n.isStatic||this.isStatic,this.mass=n.mass||this.mass,this.friction=n.friction||this.friction,this.restitution=n.restitution||this.restitution}}},methods:{modifyAttribute:function(e){var t=this.selectionCell.getAttribute(e,c[e]),n=this[e];if(n!=t){this.graph.getModel().beginUpdate();try{var i=new mxCellAttributeChange(this.selectionCell,e,n);this.graph.getModel().execute(i)}finally{this.graph.getModel().endUpdate()}}}},mounted:function(){},components:{}}},116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=n.n(i),o=n(15),s=n(30);t.default={name:"palette-item",props:["icon","type","name"],computed:r()({},n.i(o.a)(["editorGraph"]),{protoCell:function(){return s.a.getMxCell(this.type)}}),methods:{addVertex:function(e,t,n){e.stopEditing(!1);var i=e.getPointForEvent(t),r=e.getModel().cloneCell(this.protoCell);r.geometry.x=i.x,r.geometry.y=i.y,e.setSelectionCells(e.importCells([r],0,0,n))}},mounted:function(){mxUtils.makeDraggable(this.$refs.item,this.editorGraph,this.addVertex)}}},117:function(e,t,n){"use strict";(function(e,t){var i,i,r=n(8),o=n.n(r);!function(i){if("object"==("undefined"==typeof exports?"undefined":o()(exports))&&void 0!==e)e.exports=i();else if("function"==typeof define&&n(219))define([],i);else{var r;"undefined"!=typeof window?r=window:void 0!==t?r=t:"undefined"!=typeof self&&(r=self),r.decomp=i()}}(function(){return function e(t,n,r){function o(a,c){if(!n[a]){if(!t[a]){var l="function"==typeof i&&i;if(!c&&l)return i(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n||e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof i&&i,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){function i(e,t,n){n=n||0;var i,r,o,s,a,c,l,u=[0,0];return i=e[1][1]-e[0][1],r=e[0][0]-e[1][0],o=i*e[0][0]+r*e[0][1],s=t[1][1]-t[0][1],a=t[0][0]-t[1][0],c=s*t[0][0]+a*t[0][1],l=i*a-s*r,N(l,0,n)||(u[0]=(a*o-r*c)/l,u[1]=(i*c-s*o)/l),u}function r(e,t,n,i){var r=t[0]-e[0],o=t[1]-e[1],s=i[0]-n[0],a=i[1]-n[1];if(s*o-a*r==0)return!1;var c=(r*(n[1]-e[1])+o*(e[0]-n[0]))/(s*o-a*r),l=(s*(e[1]-n[1])+a*(n[0]-e[0]))/(a*r-s*o);return c>=0&&c<=1&&l>=0&&l<=1}function o(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function s(e,t,n){return o(e,t,n)>0}function a(e,t,n){return o(e,t,n)>=0}function c(e,t,n){return o(e,t,n)<0}function l(e,t,n){return o(e,t,n)<=0}function u(e,t,n,i){if(i){var r=I,s=k;r[0]=t[0]-e[0],r[1]=t[1]-e[1],s[0]=n[0]-t[0],s[1]=n[1]-t[1];var a=r[0]*s[0]+r[1]*s[1],c=Math.sqrt(r[0]*r[0]+r[1]*r[1]),l=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return Math.acos(a/(c*l))<i}return 0===o(e,t,n)}function d(e,t){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function f(e,t){var n=e.length;return e[t<0?t%n+n:t%n]}function h(e){e.length=0}function p(e,t,n,i){for(var r=n;r<i;r++)e.push(t[r])}function v(e){for(var t=0,n=e,i=1;i<e.length;++i)(n[i][1]<n[t][1]||n[i][1]===n[t][1]&&n[i][0]>n[t][0])&&(t=i);s(f(e,t-1),f(e,t),f(e,t+1))||m(e)}function m(e){for(var t=[],n=e.length,i=0;i!==n;i++)t.push(e.pop());for(var i=0;i!==n;i++)e[i]=t[i]}function g(e,t){return c(f(e,t-1),f(e,t),f(e,t+1))}function y(e,t,n){var r,o,s=T,c=A;if(a(f(e,t+1),f(e,t),f(e,n))&&l(f(e,t-1),f(e,t),f(e,n)))return!1;o=d(f(e,t),f(e,n));for(var u=0;u!==e.length;++u)if((u+1)%e.length!==t&&u!==t&&a(f(e,t),f(e,n),f(e,u+1))&&l(f(e,t),f(e,n),f(e,u))&&(s[0]=f(e,t),s[1]=f(e,n),c[0]=f(e,u),c[1]=f(e,u+1),r=i(s,c),d(f(e,t),r)<o))return!1;return!0}function _(e,t,n,i){var r=i||[];if(h(r),t<n)for(var o=t;o<=n;o++)r.push(e[o]);else{for(var o=0;o<=n;o++)r.push(e[o]);for(var o=t;o<e.length;o++)r.push(e[o])}return r}function x(e){for(var t=[],n=[],i=[],r=[],o=Number.MAX_VALUE,s=0;s<e.length;++s)if(g(e,s))for(var a=0;a<e.length;++a)if(y(e,s,a)){n=x(_(e,s,a,r)),i=x(_(e,a,s,r));for(var c=0;c<i.length;c++)n.push(i[c]);n.length<o&&(t=n,o=n.length,t.push([f(e,s),f(e,a)]))}return t}function E(e){var t=x(e);return t.length>0?b(e,t):[e]}function b(e,t){if(0===t.length)return[e];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2===t[0].length&&t[0][0]instanceof Array){for(var n=[e],i=0;i<t.length;i++)for(var r=t[i],o=0;o<n.length;o++){var s=n[o],a=b(s,r);if(a){n.splice(o,1),n.push(a[0],a[1]);break}}return n}var r=t,i=e.indexOf(r[0]),o=e.indexOf(r[1]);return-1!==i&&-1!==o&&[_(e,i,o),_(e,o,i)]}function w(e){var t,n=e;for(t=0;t<n.length-1;t++)for(var i=0;i<t-1;i++)if(r(n[t],n[t+1],n[i],n[i+1]))return!1;for(t=1;t<n.length-2;t++)if(r(n[0],n[n.length-1],n[t],n[t+1]))return!1;return!0}function S(e,t,n,i,r){r=r||0;var o=t[1]-e[1],s=e[0]-t[0],a=o*e[0]+s*e[1],c=i[1]-n[1],l=n[0]-i[0],u=c*n[0]+l*n[1],d=o*l-c*s;return N(d,0,r)?[0,0]:[(l*a-s*u)/d,(o*u-c*a)/d]}function R(e,t,n,i,r,o,u){o=o||100,u=u||0,r=r||25,t=void 0!==t?t:[],n=n||[],i=i||[];var h=[0,0],v=[0,0],m=[0,0],y=0,_=0,x=0,E=0,b=0,w=0,C=0,N=[],I=[],k=e,T=e;if(T.length<3)return t;if(++u>o)return console.warn("quickDecomp: max level ("+o+") reached."),t;for(var A=0;A<e.length;++A)if(g(k,A)){n.push(k[A]),y=_=Number.MAX_VALUE;for(var G=0;G<e.length;++G)s(f(k,A-1),f(k,A),f(k,G))&&l(f(k,A-1),f(k,A),f(k,G-1))&&(m=S(f(k,A-1),f(k,A),f(k,G),f(k,G-1)),c(f(k,A+1),f(k,A),m)&&(x=d(k[A],m))<_&&(_=x,v=m,w=G)),s(f(k,A+1),f(k,A),f(k,G+1))&&l(f(k,A+1),f(k,A),f(k,G))&&(m=S(f(k,A+1),f(k,A),f(k,G),f(k,G+1)),s(f(k,A-1),f(k,A),m)&&(x=d(k[A],m))<y&&(y=x,h=m,b=G));if(w===(b+1)%e.length)m[0]=(v[0]+h[0])/2,m[1]=(v[1]+h[1])/2,i.push(m),A<b?(p(N,k,A,b+1),N.push(m),I.push(m),0!==w&&p(I,k,w,k.length),p(I,k,0,A+1)):(0!==A&&p(N,k,A,k.length),p(N,k,0,b+1),N.push(m),I.push(m),p(I,k,w,A+1));else{if(w>b&&(b+=e.length),E=Number.MAX_VALUE,b<w)return t;for(var G=w;G<=b;++G)a(f(k,A-1),f(k,A),f(k,G))&&l(f(k,A+1),f(k,A),f(k,G))&&(x=d(f(k,A),f(k,G)))<E&&(E=x,C=G%e.length);A<C?(p(N,k,A,C+1),0!==C&&p(I,k,C,T.length),p(I,k,0,A+1)):(0!==A&&p(N,k,A,T.length),p(N,k,0,C+1),p(I,k,C,A+1))}return N.length<I.length?(R(N,t,n,i,r,o,u),R(I,t,n,i,r,o,u)):(R(I,t,n,i,r,o,u),R(N,t,n,i,r,o,u)),t}return t.push(e),t}function C(e,t){for(var n=0,i=e.length-1;e.length>3&&i>=0;--i)u(f(e,i-1),f(e,i),f(e,i+1),t)&&(e.splice(i%e.length,1),n++);return n}function N(e,t,n){return n=n||0,Math.abs(e-t)<n}t.exports={decomp:E,quickDecomp:R,isSimple:w,removeCollinearPoints:C,makeCCW:v};var I=[],k=[],T=[],A=[]},{}]},{},[1])(1)})}).call(t,n(220)(e),n(16))},118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29),r=n(86),o=n.n(r),s=n(81),a=n(83),c=n(84),l=n.n(c),u=n(85),d=(n.n(u),n(80));n.n(d),n(82);i.a.config.productionTip=!1,i.a.use(l.a),new i.a({el:"#app",store:a.a,router:s.a,template:"<App/>",components:{App:o.a},strict:!1})},119:function(e,t,n){"use strict";var i=n(122),r=n.n(i),o=n(126),s=n.n(o),a=n(127),c=n.n(a),l=n(130),u=n.n(l),d=n(129),f=n.n(d),h=function(e){function t(){return s()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"paintBackground",value:function(e,t,n,i,r){var o=this.state.cell.direction,s=void 0;switch(o){case 1:s=[{x:0,y:0},{x:0,y:r},{x:i,y:r}];break;case 2:s=[{x:i,y:0},{x:0,y:r},{x:i,y:r}];break;case 3:s=[{x:0,y:0},{x:i,y:0},{x:i,y:r}];break;case 4:s=[{x:0,y:0},{x:0,y:r},{x:i,y:0}]}e.translate(t,n),e.begin(),e.moveTo(s[0].x,s[0].y),e.lineTo(s[1].x,s[1].y),e.lineTo(s[2].x,s[2].y),e.lineTo(s[0].x,s[0].y),e.fillAndStroke(),e.end(),e.stroke()}}]),t}(mxShape);mxCellRenderer.registerShape("triangle",h)},187:function(e,t){},188:function(e,t){},189:function(e,t){},190:function(e,t){},191:function(e,t){},192:function(e,t){},193:function(e,t){},194:function(e,t){e.exports={name:"scene-demo",description:"This is a test scene file",bodies:[{type:"circle",x:100,y:100,radius:30,options:{label:"circle1"}},{type:"rectangle",x:200,y:40,width:80,height:80,options:{label:"rectangle1",friction:0,restitution:1}},{type:"triangle",x:200,y:200,width:50,height:50,direction:1,options:{label:"triangle1",friction:.2,restitution:.1}},{type:"rectangle",x:0,y:600,width:810,height:30,options:{label:"ground",isStatic:!0,friction:0,frictionAir:0,frictionStatic:1,restitution:1}}],gravity:{scale:.01,x:0,y:1}}},204:function(e,t,n){n(188);var i=n(14)(n(111),n(211),null,null);e.exports=i.exports},205:function(e,t,n){n(192);var i=n(14)(n(112),n(215),null,null);e.exports=i.exports},206:function(e,t,n){n(190);var i=n(14)(n(113),n(213),"data-v-46c169f8",null);e.exports=i.exports},207:function(e,t,n){n(191);var i=n(14)(n(114),n(214),"data-v-6063e500",null);e.exports=i.exports},208:function(e,t,n){n(189);var i=n(14)(n(115),n(212),null,null);e.exports=i.exports},209:function(e,t,n){n(187);var i=n(14)(n(116),n(210),null,null);e.exports=i.exports},210:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"item",staticClass:"palette-item"},[n("i",{staticClass:"iconfont",class:e.icon,attrs:{title:e.name}}),e._v(" "),n("p",[e._v(e._s(e.name))])])},staticRenderFns:[]}},211:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"},attrs:{id:"scene-running"}},[n("div",{attrs:{id:"scene-running-toolbar"}},[n("i",{staticClass:"iconfont icon-start",attrs:{title:"开始"},on:{click:e.sceneStart}}),e._v(" "),n("i",{staticClass:"iconfont icon-zanting",attrs:{title:"暂停"},on:{click:e.scenePause}}),e._v(" "),n("i",{staticClass:"iconfont icon-restart",attrs:{title:"重置"},on:{click:e.sceneReset}})]),e._v(" "),n("div",{attrs:{id:"scene-running-render"}}),e._v(" "),n("div",{attrs:{id:"operation"}},[n("el-button",{on:{click:e.handleAdd}},[e._v("add object")]),e._v(" "),n("span",[e._v("view x:")]),e._v(" "),n("el-slider",{attrs:{max:1920},model:{value:e.viewPort.max.x,callback:function(t){e.$set(e.viewPort.max,"x",t)},expression:"viewPort.max.x"}}),e._v(" "),n("span",[e._v("view y:")]),e._v(" "),n("el-slider",{attrs:{max:1080},model:{value:e.viewPort.max.y,callback:function(t){e.$set(e.viewPort.max,"y",t)},expression:"viewPort.max.y"}})],1)])},staticRenderFns:[]}},212:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"scene-editor-property"}},[n("el-input",{attrs:{placeholder:"请输入名称"},on:{blur:function(t){e.modifyAttribute("label")}},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}},[n("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("名称：")])],2),e._v(" "),n("el-row",[n("el-col",{attrs:{span:4}},[n("p",[e._v("静止:")])]),e._v(" "),n("el-col",{attrs:{span:20}},[n("el-switch",{on:{change:function(t){e.modifyAttribute("isStatic")}},model:{value:e.isStatic,callback:function(t){e.isStatic=t},expression:"isStatic"}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:4}},[n("p",[e._v("质量:")])]),e._v(" "),n("el-col",{attrs:{span:20}},[n("el-input-number",{attrs:{min:0,step:1,precision:2,"controls-position":"right"},on:{change:function(t){e.modifyAttribute("mass")}},model:{value:e.mass,callback:function(t){e.mass=t},expression:"mass"}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:4}},[n("p",[e._v("摩擦力:")])]),e._v(" "),n("el-col",{attrs:{span:20}},[n("el-input-number",{attrs:{min:0,max:1,step:.1,precision:2,"controls-position":"right"},on:{change:function(t){e.modifyAttribute("friction")}},model:{value:e.friction,callback:function(t){e.friction=t},expression:"friction"}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:4}},[n("p",[e._v("恢复系数:")])]),e._v(" "),n("el-col",{attrs:{span:20}},[n("el-input-number",{attrs:{min:0,max:1,step:.1,precision:2,"controls-position":"right"},on:{change:function(t){e.modifyAttribute("restitution")}},model:{value:e.restitution,callback:function(t){e.restitution=t},expression:"restitution"}})],1)],1)],1)},staticRenderFns:[]}},213:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"},attrs:{id:"scene-editor"}},[n("div",{attrs:{id:"scene-running-toolbar"}},[n("i",{staticClass:"iconfont icon-delete",attrs:{title:"删除"},on:{click:e.deleteBody}}),e._v(" "),n("i",{staticClass:"iconfont icon-chexiao",attrs:{title:"撤销"},on:{click:e.undo}}),e._v(" "),n("i",{staticClass:"iconfont icon-redo",attrs:{title:"恢复"},on:{click:e.redo}})]),e._v(" "),n("el-row",{staticStyle:{height:"70%"}},[n("el-col",{staticStyle:{height:"100%"},attrs:{span:4}},[n("scene-palette"),e._v(" "),n("p",[e._v("缩略图")]),e._v(" "),n("div",{attrs:{id:"outline"}})],1),e._v(" "),n("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[n("div",{attrs:{id:"graph-container"}})])],1),e._v(" "),n("scene-property")],1)},staticRenderFns:[]}},214:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"scene-editor-palette"}},[n("div",{attrs:{id:"object-palette"}},[n("palette-item",{attrs:{icon:"icon-rectangle",type:e.types.RECTANGLE,name:"矩形"}}),e._v(" "),n("palette-item",{attrs:{icon:"icon-circle",type:e.types.CIRCLE,name:"圆形"}}),e._v(" "),n("palette-item",{attrs:{icon:"icon-left-bottom-triangle",type:e.types.TRIANGLE,name:"直角三角形"}})],1)])},staticRenderFns:[]}},215:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vml-workbench",staticStyle:{height:"100%:width:100%"}},[n("header",{attrs:{id:"vml-header"}}),e._v(" "),n("circle-menu",{staticClass:"circle-menu-style",attrs:{type:"bottom",number:4,animate:"animated jello",circle:""}},[n("a",{staticClass:"question el-icon-question",attrs:{slot:"item_btn",title:"帮助"},slot:"item_btn"}),e._v(" "),n("a",{staticClass:"question-font",attrs:{slot:"item_1"},on:{click:e.handleAbout},slot:"item_1"},[e._v("关于")]),e._v(" "),n("a",{staticClass:"question-font",attrs:{slot:"item_2"},slot:"item_2"},[e._v("问答")]),e._v(" "),n("a",{staticClass:"question-font",attrs:{slot:"item_3"},slot:"item_3"},[e._v("建议")]),e._v(" "),n("a",{staticClass:"question-font",attrs:{slot:"item_4"},slot:"item_4"},[e._v("支持")])]),e._v(" "),n("div",{attrs:{id:"main-workbench"}},[n("el-row",{staticStyle:{height:"100%"}},[n("el-col",{staticStyle:{height:"100%"},attrs:{span:e.sceneEditorSpan}},[n("SceneEditor")],1),e._v(" "),n("el-col",{staticStyle:{height:"100%"},attrs:{span:e.sceneRunningSpan}},[n("SceneRunning")],1)],1)],1)],1)},staticRenderFns:[]}},216:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},221:function(e,t){e.exports={type:"circle",x:30,y:30,radius:30,options:{label:"circle"}}},222:function(e,t){e.exports={options:{label:"Body",isStatic:!1,mass:1,friction:.1,restitution:0,position:{x:0,y:0},vertices:[],angle:0}}},223:function(e,t){e.exports={type:"triangle",x:50,y:50,width:50,height:50,direction:1,options:{label:"triangle"}}},224:function(e,t){e.exports={type:"rectangle",x:50,y:25,width:100,height:50,direction:1,options:{label:"rectangle"}}},30:function(e,t,n){"use strict";var i=n(56),r=n.n(i),o=n(5),s=n(223),a=n.n(s),c=n(221),l=n.n(c),u=n(224),d=n.n(u),f={getMxCell:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new window.mxCell;switch(e){case o.RECTANGLE:var i=r()({},a.a,t),s=i.x,c=i.y,u=i.width,f=i.height,h=i.options;n.geometry=new window.mxGeometry(s-u/2,c-f/2,u,f),n.style="shape=rectangle",n.value=h;break;case o.CIRCLE:var p=r()({},l.a,t),s=p.x,c=p.y,v=p.radius,h=p.options;n.geometry=new window.mxGeometry(s-v,c-v,2*v,2*v),n.style="shape=ellipse",n.value=h;break;case o.TRIANGLE:var m=r()({},d.a,t),s=m.x,c=m.y,u=m.width,f=m.height,g=m.direction,h=m.options;n.geometry=new window.mxGeometry(s,c,u,f),n.style="shape=triangle",n.direction=g,n.value=h;break;default:console.error("unknown body type:"+e)}return n.vertex=!0,n.type=e,n}};t.a=f},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"UPDATE_SCENE_RUNNING",function(){return i}),n.d(t,"INIT_SCENE_RUNNING",function(){return r}),n.d(t,"SET_RUNNING_RENDER",function(){return o}),n.d(t,"INIT_SCENE_EDITOR",function(){return s}),n.d(t,"SET_EDITOR_GRAPH",function(){return a}),n.d(t,"SET_EDITOR_SELECTION_CELL",function(){return c}),n.d(t,"RECTANGLE",function(){return l}),n.d(t,"CIRCLE",function(){return u}),n.d(t,"TRIANGLE",function(){return d});var i="sceneEditor/mutations/updateSceneRunning",r="sceneEditor/actions/initScenceRunning",o="sceneEditor/mutations/setRunningRender",s="sceneEditor/actions/initSceneEditor",a="sceneEditor/mutations/setEditorGraph",c="sceneEditor/mutations/setEditorSelectionCell",l="rectangle",u="circle",d="triangle"},55:function(e,t,n){"use strict";var i=n(5),r=n(30),o={decode:function(e,t){for(var n in e)e[n]instanceof Object||(t[n]=e[n]);var i=t.root.children[0];for(var o in e.bodies){var s=r.a.getMxCell(e.bodies[o].type,e.bodies[o]);i.insert(s)}t.setRoot(t.root)},encode:function(e){var t={name:"",description:"",bodies:[]},n=new window.mxGraphModel;for(var r in e)e[r]instanceof Object||e[r]==n[r]||"nextId"==r||(t[r]=e[r]);for(var o in e.root.children[0].children){var s=e.root.children[0].children[o],a=s.geometry,c=s.value,l=s.type,u=s.direction,d=a.x,f=a.y,h=a.width,p=a.height,v={};switch(v.options=c,v.type=l,l){case i.RECTANGLE:v.x=d+h/2,v.y=f+p/2,v.width=h,v.height=p;break;case i.CIRCLE:var m=h/2;v.x=d+m,v.y=f+m,v.radius=m;break;case i.TRIANGLE:v.x=d,v.y=f,v.width=h,v.height=p,v.direction=u;break;default:console.error("unknown body type:"+l)}t.bodies.push(v)}return t}};t.a=o},80:function(e,t){mxCell.prototype.getAttribute=function(e,t){return this.getValue()[e]||t},mxCell.prototype.setAttribute=function(e,t){this.getValue()[e]=t}},81:function(e,t,n){"use strict";var i=n(29),r=n(217),o=n(205),s=n.n(o);i.a.use(r.a),t.a=new r.a({routes:[{path:"/",component:s.a}]})},82:function(e,t,n){"use strict";n(119)},83:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i,r,o=n(128),s=n.n(o),a=n(29),c=n(15),l=n(5),u=n(77),d=(n.n(u),n(194)),f=n.n(d),h=n(55);a.a.use(c.d);var p=new c.d.Store({state:function(){return{fileName:"default.scene",sceneData:f.a,editorGraph:null,editorSelectionCell:null,runningRender:null}},getters:{fileName:function(e){return e.fileName},editorGraph:function(e){return e.editorGraph},editorSelectionCell:function(e){return e.editorSelectionCell},sceneData:function(e){return e.sceneData},runningRender:function(e){return e.runningRender},engine:function(e){return e.runningRender.engine},world:function(e){return e.runningRender.engine.world}},mutations:(i={},s()(i,l.SET_RUNNING_RENDER,function(e,t){e.runningRender=t}),s()(i,l.SET_EDITOR_GRAPH,function(e,t){e.editorGraph=t}),s()(i,l.SET_EDITOR_SELECTION_CELL,function(e,t){e.editorSelectionCell=t}),s()(i,l.UPDATE_SCENE_RUNNING,function(e,t){var n=t.fileName,i=void 0===n?e.fileName:n,r=t.sceneData;e.fileName=i,e.sceneData=r}),i),actions:(r={},s()(r,l.INIT_SCENE_RUNNING,function(e){e.commit(l.UPDATE_SCENE_RUNNING,{sceneData:h.a.encode(e.getters.editorGraph.getModel())});var t=u.Engine.create(),n=u.Render.create({engine:t,options:{pixelRatio:1,background:"gray",wireframeBackground:"blue",hasBounds:!1,enabled:!0,wireframes:!1,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!0,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}});e.commit(l.SET_RUNNING_RENDER,n);for(var i=e.getters.sceneData,r=0;r<i.bodies.length;r++){var o=i.bodies[r],s=o.type,a=o.x,c=o.y,d=o.radius,f=o.width,p=o.height,v=o.direction,m=o.options,g=null;switch(s){case l.RECTANGLE:g=u.Bodies.rectangle(a,c,f,p,m);break;case l.CIRCLE:g=u.Bodies.circle(a,c,d,m);break;case l.TRIANGLE:var y=void 0;switch(v){case 1:y=[{x:0,y:0},{x:0,y:p},{x:f,y:p}];break;case 2:y=[{x:f,y:0},{x:0,y:p},{x:f,y:p}];break;case 3:y=[{x:0,y:0},{x:f,y:0},{x:f,y:p}];break;case 4:y=[{x:0,y:0},{x:0,y:p},{x:f,y:0}]}var _=u.Vertices.centre(y);g=u.Bodies.fromVertices(a+_.x,c+_.y,y,m);break;default:console.error("unknown body type"+s)}g&&u.World.addBody(t.world,g)}u.Events.on(u.MouseConstraint.create(t),"mousedown",function(e){for(var n=e.mouse.mousedownPosition,i=u.Composite.allBodies(t.world),r=0;r<i.length;r++){var o=i[r];u.Bounds.contains(o.bounds,n)&&u.Vertices.contains(o.vertices,n)&&console.log(o)}})}),s()(r,l.INIT_SCENE_EDITOR,function(e){var t=new mxGraph;e.commit(l.SET_EDITOR_GRAPH,t),h.a.decode(e.getters.sceneData,t.getModel()),t.getSelectionModel().addListener(mxEvent.CHANGE,function(n,i){var r=t.getSelectionCell();e.commit(l.SET_EDITOR_SELECTION_CELL,r)}),t.convertValueToString=function(e){return e.value.label},t.valueForCellChanged=function(e,t){e.value.label=t},console.log("model",t.model)}),r)})},85:function(e,t){},86:function(e,t,n){n(193);var i=n(14)(n(110),n(216),null,null);e.exports=i.exports}},[118]);
//# sourceMappingURL=app.10a00afd8f2792328794.js.map